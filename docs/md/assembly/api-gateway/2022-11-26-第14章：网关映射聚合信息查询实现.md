---
title: 第14章：网关映射聚合信息查询实现
pay: https://articles.zsxq.com/id_i2epzox8nb1z.html
---

# 《API网关》第14章：网关映射聚合信息查询实现

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

- **本章难度**：★★★☆☆
- **本章重点**：提供查询分配到指定网关算力下的系统信息，包括：系统、接口、方法，用于网关算力助手组件拉取后进行注册映射。HTTP -> RPC。
- **课程视频**：[https://t.zsxq.com/08MiOwntL](https://t.zsxq.com/08MiOwntL)

## 一、学习指引

`不要总想着把问题留到最后`

很多时候我会把编程和生活类比，会发现编程的问题其实也是抽象后的生活问题。就像我们并不能在生活总是想着把问题放到最后处理，人无远虑必有近忧，总是把问题放到最后，最后也就处理不过来了。

对于编程开发又何尝不是，如果你不停的从这复制点代码，从那粘贴点逻辑，想当然的编写着意想能一把梭哈的逻辑。那么最后就会是一片片的报错。即使在好用的单元测试在这个时候也没有太大作用，你只能花费大量的时候去梳理，你可能已经忘记了一天前写的代码逻辑。

问题越小才越容易被理解和处理，生活如此，编程亦是如此。

## 二、聚合配置

本章内容属于注册中心所需提供的接口，但小傅哥是放在了第13章后来实现的这部分内容。因为在第14章中**服务发现**模块中需要从网关注册中心拉取服务配置。这个服务配置其实就是各个RPC服务配置【系统、接口、方法】把这些信息拉取下来，注册到网关算力中，完成RPC映射的过程。那么本章我们就先来实现这样一个接口。

<div align="center">
    <img src="https://bugstack.cn/images/article/assembly/api-gateway/api-gateway-14-01.png?raw=true" width="500px">
</div>

首先通过 gateway_distribution 表，把网关和RPC应用服务关联起来，方便知道哪个网关算力处理哪些RPC映射管理。有了这个映射关系后，就可以把对应的 application_interface、application_interface_method、application_system 三个表维护应用的配置信息关联起来了。